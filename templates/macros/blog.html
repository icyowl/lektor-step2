{% macro render_blog_post(post, from_index=false) %}
  <div class="blog-post">
  {% if from_index %}
    <h2><a href="{{ post|url }}">{{ post.title }}</a></h2>
  {% else %}
    <h2>{{ post.title }}</h2>
  {% endif %}
  <hr />
  <div class="meta">
    <ul> 
    {% if post.tags %}
      {% if post.tags|length == 1 %}
        <li>tag:</li>
      {% else %}
        <li>tags:</li>
      {% endif %}
      {% for t in post.tags %}
        <li>
          <a href="{{ ('/blog@tag/' ~ t.lower() )|url }}">{{ t }}</a>
        </li>
      {% endfor %}
      </ul>
    {% endif %}
    <span>
      on {{ post.pub_date }}
    </span>
  </div>
  {% if from_index %}
    {{ post.body | excerpt }}
  {% else %}
    {{ post.body }}
  {% endif %}
  </div>
{% endmacro %}
